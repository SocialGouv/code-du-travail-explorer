version: '3'

services:

  node:
    container_name: code-du-travail-explorer
    env_file:
      - .env
    build:
      context: .
      dockerfile: ./docker/prod/Dockerfile
      args:
        NODE_ENV: $NODE_ENV
        API_URL: $API_URL
        PORT: $PORT
    ports:
      - $PORT:$PORT
    restart: always
    volumes:
      - ./pages:/app/pages
      - ./routes.js:/app/routes.js
      - ./src:/app/src
      - ./static:/app/static
